{"version":3,"sources":["components/common/Pagination.js","styles/pagination.scss","components/pages/Asset/Asset.scss","components/pages/Asset/Asset.js","components/pages/Asset/index.js"],"names":["Pagination","_this","this","arr","start","end","props","length","Math","max","min","current","i","push","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","classes","paginate","pagenum","onClick","Fragment","map","index","key","active","isLast","Component","module","exports","container","Asset","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","holders","currentPage","Number","match","params","page","rowPerPage","id","asset_api","ws_rpc","closed","connectWS","exec","count","then","res","_this2","setState","last_page","e","history","concat","network","conn","ChainWebSocket","config","getEnv","WEBSOCKET_PATH","login","GrapheneApi","init","_this3","Apis","instance","enableOrders","init_promise","asyncToGenerator","regenerator_default","mark","_callee3","assets","asset","wrap","_context3","prev","next","db_api","sent","getHolders","stop","nextProps","_this$state","symbol","split","react_default","options","description","holder","account_id","href","name","amount","pow","precision","toLocaleString","navigator","language","minimumFractionDigits","goToPage","bind","__webpack_require__","d","__webpack_exports__","pages_Asset_Asset"],"mappings":"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","file":"static/js/25.6f59cc91.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport classes from '@quanta/styles/pagination.scss';\n\nclass Pagination extends Component {\n\n    render() {\n        var arr = [];\n        let start = 1\n        let end = this.props.length\n\n        if (this.props.length > 7) {\n            end = Math.max(Math.min(this.props.current + 3, this.props.length), 7)\n            start = Math.min(Math.max(this.props.current - 4, 0), this.props.length - 7)\n        }\n\n        for (let i = start; i < end; i++) {\n            arr.push(i)\n        }\n\n        return (\n            <div className={classes.paginate + \" d-flex justify-content-center\"}>\n                <button className={classes.pagenum + (this.props.current === 1 ? \" d-none\" : \"\")}\n                    onClick={() => { this.props.onClick(1) }}>First</button>\n                <button className={classes.pagenum + (this.props.current === 1 ? \" d-none\" : \"\")}\n                    onClick={() => { this.props.onClick(this.props.current - 1) }}>Prev</button>\n                {this.props.length ?\n                    <React.Fragment>\n                        {arr.map(i => {\n                            let index = i + 1\n                            return (\n                                <button key={index} className={classes.pagenum + (index === this.props.current ? \" \" + classes.active : \"\")}\n                                    onClick={() => this.props.onClick(index)}>{index}</button>\n                            )\n                        })}\n                        <button className={classes.pagenum + (end >= this.props.length ? \" d-none\" : \"\")}\n                            onClick={() => { this.props.onClick(this.props.length) }}>Last</button>\n                    </React.Fragment>\n                    : null\n                }\n                <button className={classes.pagenum + (this.props.current === this.props.length || this.props.isLast ? \" d-none\" : \"\")}\n                    onClick={() => { this.props.onClick(this.props.current + 1) }}>Next</button>\n            </div>\n        )\n    }\n}\n\nexport default Pagination","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginate\":\"pagination_paginate__2tG43\",\"pagenum\":\"pagination_pagenum__3jIz0\",\"active\":\"pagination_active__3XMsc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Asset_container__3sNiU\"};","import React, { Component } from 'react';\nimport classes from './Asset.scss';\nimport { Apis } from \"@quantadex/bitsharesjs-ws\";\nimport GrapheneApi from \"@quantadex/bitsharesjs-ws/cjs/src/GrapheneApi\";\nimport ChainWebSocket from \"@quantadex/bitsharesjs-ws/cjs/src/ChainWebSocket\";\nimport Pagination from '@quanta/components/common/Pagination';\nimport config from '@quanta/config';\n\nclass Asset extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            holders: [],\n            currentPage: Number(this.props.match.params.page),\n            rowPerPage: 15,\n        };\n    }\n\n    async getHolders(id, page) {\n        const { rowPerPage } = this.state\n        if (!this.asset_api || this.asset_api.ws_rpc.closed) {\n            await this.connectWS()\n        }\n        const count = await this.asset_api.exec(\"get_asset_holders_count\", [id])\n        return this.asset_api.exec(\"get_asset_holders\", [id, Number(page - 1) * rowPerPage, rowPerPage])\n            .then(res => {\n                this.setState({ holders: res, last_page: res.length < rowPerPage, count })\n            })\n    }\n\n    goToPage(e) {\n        this.props.history.push(`/${this.props.match.params.network}/asset/${this.props.match.params.id}/${e}`)\n    }\n\n    async connectWS() {\n        let conn = new ChainWebSocket(config.getEnv().WEBSOCKET_PATH, () => { }, 3000, true, () => { });\n        await conn.login(\"\", \"\")\n\n        this.asset_api = new GrapheneApi(conn, \"asset\");\n        await this.asset_api.init()\n    }\n\n    componentDidMount() {\n        const { match } = this.props\n        const { currentPage } = this.state\n        Apis.instance(config.getEnv().WEBSOCKET_PATH, true, 3000, { enableOrders: false }).init_promise\n            .then(async () => {\n                const assets = await Apis.instance().db_api().exec(\"get_assets\", [[match.params.id]])\n\n                const asset = assets[0]\n                this.getHolders(asset.id, currentPage)\n                this.setState({ asset })\n            })\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.match.params.page !== this.state.currentPage) {\n            this.getHolders(nextProps.match.params.id, nextProps.match.params.page)\n            this.setState({ currentPage: Number(nextProps.match.params.page) })\n        }\n    }\n\n    render() {\n        const { match } = this.props\n        const { asset, holders, currentPage, last_page, count } = this.state\n        const symbol = asset && asset.symbol.split('0X')\n        return (\n            asset ?\n                <div className={classes.container}>\n                    <h3>{symbol[0]} | {asset.id}</h3>\n                    {symbol[1] ? <h6>0x{symbol[1]}</h6> : null}\n                    <div className=\"small text-secondary\">{asset.options.description}</div>\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>Holders ({count})</th>\n                                <th className=\"text-right\">Amount</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {holders.map(holder => {\n                                return (\n                                    <tr key={holder.account_id}>\n                                        <td><a href={\"/\" + match.params.network + \"/account/\" + holder.account_id}>{holder.name.split('0X')[0]}</a></td>\n                                        <td className=\"text-right\">{(holder.amount / Math.pow(10, asset.precision)).toLocaleString(navigator.language, { minimumFractionDigits: asset.precision })}</td>\n                                    </tr>\n                                )\n                            })}\n                        </tbody>\n                    </table>\n                    <Pagination current={currentPage}\n                        isLast={last_page}\n                        onClick={this.goToPage.bind(this)} />\n                </div>\n                : null\n        )\n    }\n}\n\nexport default Asset;\n","export { default } from './Asset';\n"],"sourceRoot":""}