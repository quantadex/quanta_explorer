{"version":3,"sources":["components/pages/Witness/Witness.scss","components/pages/Witness/Witness.js","components/pages/Witness/index.js"],"names":["module","exports","container","Witness","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","witnesses","all_witnesses","_this2","Apis","instance","config","getEnv","WEBSOCKET_PATH","enableOrders","init_promise","then","res","db_api","exec","e","active_witnesses","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","list","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","witness","name","wrap","_context","prev","next","undefined","Symbol","iterator","done","value","id","witness_account","sent","push","objectSpread","t0","return","finish","setState","stop","_x","apply","arguments","_this3","react_default","createElement","className","classes","map","key","href","match","params","network","Number","total_votes","toLocaleString","navigator","language","minimumFractionDigits","total_missed","last_confirmed_block_num","Component","__webpack_require__","d","__webpack_exports__","pages_Witness_Witness"],"mappings":"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","file":"static/js/20.fa6b8808.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Witness_container__2zmO_\"};","import React, { Component } from 'react';\nimport classes from './Witness.scss';\nimport { Apis } from \"@quantadex/bitsharesjs-ws\";\nimport config from '@quanta/config';\n\nclass Witness extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\twitnesses: [],\n\t\t\tall_witnesses: [],\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tfunction getName(id) {\n\t\t\treturn Apis.instance().db_api().exec(\"get_accounts\", [[id]]).then(e => {\n\t\t\t\treturn e[0].name\n\t\t\t})\n\t\t}\n\n\t\tApis.instance(config.getEnv().WEBSOCKET_PATH, true, 3000, { enableOrders: false }).init_promise.then((res) => {\n\t\t\t// console.log(\"connected to:\", res[0].network);\n\t\t\tApis.instance().db_api().exec(\"get_global_properties\", []).then(e => {\n\t\t\t\t// console.log(e)\n\t\t\t\treturn e.active_witnesses\n\t\t\t}).then(e => {\n\t\t\t\tApis.instance().db_api().exec(\"get_witnesses\", [e]).then(async witnesses => {\n\t\t\t\t\t// console.log(witnesses)\n\t\t\t\t\tconst list = []\n\t\t\t\t\tfor (let witness of witnesses) {\n\t\t\t\t\t\tlet name = await getName(witness.witness_account)\n\t\t\t\t\t\tlist.push({ name: name, ...witness })\n\t\t\t\t\t}\n\t\t\t\t\tthis.setState({ witnesses: list })\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tApis.instance().db_api().exec(\"lookup_witness_accounts\", [0, 100]).then(e => {\n\t\t\t\tthis.setState({ all_witnesses: e })\n\t\t\t})\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={classes.container}>\n\t\t\t\t<h3>Active Witnesses</h3>\n\t\t\t\t<table className=\"w-100 mb-5\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>ID</th>\n\t\t\t\t\t\t\t<th>Account</th>\n\t\t\t\t\t\t\t<th className=\"text-right\">Total votes</th>\n\t\t\t\t\t\t\t<th className=\"text-right\">Missed</th>\n\t\t\t\t\t\t\t<th className=\"text-right\">Last Confirmed Block</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{this.state.witnesses.map(witness => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<tr key={witness.id}>\n\t\t\t\t\t\t\t\t\t<td><a href={\"/\" + this.props.match.params.network + \"/object/\" + witness.id}>{witness.id}</a></td>\n\t\t\t\t\t\t\t\t\t<td><a href={\"/\" + this.props.match.params.network + \"/account/\" + witness.name}>{witness.name}</a></td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{Number(witness.total_votes).toLocaleString(navigator.language, { minimumFractionDigits: 0 })}</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{witness.total_missed.toLocaleString(navigator.language, { minimumFractionDigits: 0 })}</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{witness.last_confirmed_block_num.toLocaleString(navigator.language, { minimumFractionDigits: 0 })}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\n\t\t\t\t<h3>All Witnesses</h3>\n\t\t\t\t<table className=\"mb-5\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>ID</th>\n\t\t\t\t\t\t\t<th>Account</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{this.state.all_witnesses.map(witness => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<tr key={witness[0]}>\n\t\t\t\t\t\t\t\t\t<td className=\"pr-4\"><a href={\"/\" + this.props.match.params.network + \"/object/\" + witness[1]}>{witness[1]}</a></td>\n\t\t\t\t\t\t\t\t\t<td className=\"pr-4\"><a href={\"/\" + this.props.match.params.network + \"/account/\" + witness[0]}>{witness[0]}</a></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Witness;\n","export { default } from './Witness';\n"],"sourceRoot":""}